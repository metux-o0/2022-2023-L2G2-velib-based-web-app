{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar DEFAULT_CONFIG = {\n  v: '1.4.0',\n  hostAndPath: 'webapi.amap.com/maps',\n  key: 'f97efc35164149d0c0f299e7a8adb3d2',\n  callback: '__amap_init_callback',\n  useAMapUI: false\n};\nvar mainPromise = null;\nvar amapuiPromise = null;\nvar amapuiInited = false;\nvar APILoader = function () {\n  function APILoader(_ref) {\n    var key = _ref.key,\n      useAMapUI = _ref.useAMapUI,\n      version = _ref.version,\n      protocol = _ref.protocol;\n    _classCallCheck(this, APILoader);\n    this.config = _extends({}, DEFAULT_CONFIG, {\n      useAMapUI: useAMapUI,\n      protocol: protocol\n    });\n    if (typeof window !== 'undefined') {\n      if (key) {\n        this.config.key = key;\n      } else if ('amapkey' in window) {\n        this.config.key = window.amapkey;\n      }\n    }\n    if (version) {\n      this.config.v = version;\n    }\n    this.protocol = protocol || window.location.protocol;\n    if (this.protocol.indexOf(':') === -1) {\n      this.protocol += ':';\n    }\n  }\n  _createClass(APILoader, [{\n    key: 'getScriptSrc',\n    value: function getScriptSrc(cfg) {\n      return this.protocol + '//' + cfg.hostAndPath + '?v=' + cfg.v + '&key=' + cfg.key + '&callback=' + cfg.callback;\n    }\n  }, {\n    key: 'buildScriptTag',\n    value: function buildScriptTag(src) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.defer = true;\n      script.src = src;\n      return script;\n    }\n  }, {\n    key: 'getAmapuiPromise',\n    value: function getAmapuiPromise() {\n      var script = this.buildScriptTag(this.protocol + '//webapi.amap.com/ui/1.0/main-async.js');\n      var p = new Promise(function (resolve) {\n        script.onload = function () {\n          resolve();\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'getMainPromise',\n    value: function getMainPromise() {\n      var _this = this;\n      var script = this.buildScriptTag(this.getScriptSrc(this.config));\n      var p = new Promise(function (resolve) {\n        window[_this.config.callback] = function () {\n          resolve();\n          delete window[_this.config.callback];\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'load',\n    value: function load() {\n      if (typeof window === 'undefined') {\n        return null;\n      }\n      var useAMapUI = this.config.useAMapUI;\n      mainPromise = mainPromise || this.getMainPromise();\n      if (useAMapUI) {\n        amapuiPromise = amapuiPromise || this.getAmapuiPromise();\n      }\n      return new Promise(function (resolve) {\n        mainPromise.then(function () {\n          if (useAMapUI && amapuiPromise) {\n            amapuiPromise.then(function () {\n              if (window.initAMapUI && !amapuiInited) {\n                window.initAMapUI();\n                if (typeof useAMapUI === 'function') {\n                  useAMapUI();\n                }\n                amapuiInited = true;\n              }\n              resolve();\n            });\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }]);\n  return APILoader;\n}();\nexports.default = APILoader;","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","DEFAULT_CONFIG","v","hostAndPath","callback","useAMapUI","mainPromise","amapuiPromise","amapuiInited","APILoader","_ref","version","protocol","config","window","amapkey","location","indexOf","getScriptSrc","cfg","buildScriptTag","src","script","document","createElement","type","async","defer","getAmapuiPromise","p","Promise","resolve","onload","body","appendChild","getMainPromise","_this","load","then","initAMapUI","default"],"sources":["C:/Users/yexil/VÃ©lib/2022-2023-L2G2-velib-based-web-app/front/node_modules/react-amap/lib/utils/APILoader.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_CONFIG = {\n  v: '1.4.0',\n  hostAndPath: 'webapi.amap.com/maps',\n  key: 'f97efc35164149d0c0f299e7a8adb3d2',\n  callback: '__amap_init_callback',\n  useAMapUI: false\n};\n\nvar mainPromise = null;\nvar amapuiPromise = null;\nvar amapuiInited = false;\n\nvar APILoader = function () {\n  function APILoader(_ref) {\n    var key = _ref.key,\n        useAMapUI = _ref.useAMapUI,\n        version = _ref.version,\n        protocol = _ref.protocol;\n\n    _classCallCheck(this, APILoader);\n\n    this.config = _extends({}, DEFAULT_CONFIG, { useAMapUI: useAMapUI, protocol: protocol });\n    if (typeof window !== 'undefined') {\n      if (key) {\n        this.config.key = key;\n      } else if ('amapkey' in window) {\n        this.config.key = window.amapkey;\n      }\n    }\n    if (version) {\n      this.config.v = version;\n    }\n    this.protocol = protocol || window.location.protocol;\n    if (this.protocol.indexOf(':') === -1) {\n      this.protocol += ':';\n    }\n  }\n\n  _createClass(APILoader, [{\n    key: 'getScriptSrc',\n    value: function getScriptSrc(cfg) {\n      return this.protocol + '//' + cfg.hostAndPath + '?v=' + cfg.v + '&key=' + cfg.key + '&callback=' + cfg.callback;\n    }\n  }, {\n    key: 'buildScriptTag',\n    value: function buildScriptTag(src) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.defer = true;\n      script.src = src;\n      return script;\n    }\n  }, {\n    key: 'getAmapuiPromise',\n    value: function getAmapuiPromise() {\n      var script = this.buildScriptTag(this.protocol + '//webapi.amap.com/ui/1.0/main-async.js');\n      var p = new Promise(function (resolve) {\n        script.onload = function () {\n          resolve();\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'getMainPromise',\n    value: function getMainPromise() {\n      var _this = this;\n\n      var script = this.buildScriptTag(this.getScriptSrc(this.config));\n      var p = new Promise(function (resolve) {\n        window[_this.config.callback] = function () {\n          resolve();\n          delete window[_this.config.callback];\n        };\n      });\n      document.body.appendChild(script);\n      return p;\n    }\n  }, {\n    key: 'load',\n    value: function load() {\n      if (typeof window === 'undefined') {\n        return null;\n      }\n      var useAMapUI = this.config.useAMapUI;\n\n      mainPromise = mainPromise || this.getMainPromise();\n      if (useAMapUI) {\n        amapuiPromise = amapuiPromise || this.getAmapuiPromise();\n      }\n      return new Promise(function (resolve) {\n        mainPromise.then(function () {\n          if (useAMapUI && amapuiPromise) {\n            amapuiPromise.then(function () {\n              if (window.initAMapUI && !amapuiInited) {\n                window.initAMapUI();\n                if (typeof useAMapUI === 'function') {\n                  useAMapUI();\n                }\n                amapuiInited = true;\n              }\n              resolve();\n            });\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }]);\n\n  return APILoader;\n}();\n\nexports.default = APILoader;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}